<% border_class = (level || 0) > 0 ? 'border-l border-dashed border-gray-300 pl-4' : '' %>
<% if node[:children].present? %>
  <li class="mb-0.5">
    <div class="<%= border_class %>">
      <div class="flex items-center gap-2 mb-1 p-1.5 hover:bg-gray-50 rounded-md transition-colors">
        <svg class="w-4 h-4 text-amber-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path>
        </svg>
        <span class="text-sm font-semibold text-gray-800"><%= node[:name] %></span>
      </div>
      <ul>
        <% node[:children].each do |child| %>
          <%= render partial: 'servactory/web/services/service_node', locals: { node: child, level: (level || 0) + 1 } %>
        <% end %>
      </ul>
    </div>
  </li>
<% else %>
  <li class="mb-0.5">
    <div class="<%= border_class %>">
      <div class="flex items-center gap-2 p-1 hover:bg-gray-50 rounded-md transition-colors">
        <svg class="w-3 h-3 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
        </svg>
        <%= link_to node[:name], Servactory::Web::Engine.routes.url_helpers.service_path(node[:path]), class: "text-sm text-gray-700 hover:text-blue-600 transition-colors" %>
      </div>
    </div>
  </li>
<% end %> 
